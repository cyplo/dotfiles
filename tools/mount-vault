#!/bin/bash

set -e
VERACRYPT="veracrypt"
if [[ "$OSTYPE" == "darwin"* ]]; then
    VERACRYPT="/Applications/VeraCrypt.app/Contents/MacOS/VeraCrypt"
fi

MOUNT_TARGET=$1
if [[ -z "$MOUNT_TARGET" ]]; then
    MOUNT_TARGET=~/.vault
fi
mkdir -p "$MOUNT_TARGET"

$VERACRYPT -t --mount ~/vaults/vault.vera "$MOUNT_TARGET"
sudo chown $USER ~/.vault
